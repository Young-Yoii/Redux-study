<!DOCTYPE html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.0.1/redux.js"></script>
</head>
<html>
    <body>
        <div id="subject"></div>
        <div id="toc"></div>
        <div id="control"></div>
        <div id="content"></div>    
        <script>
function subject(){
    document.querySelector('#subject').innerHTML = `
    <header>
        <h1>WEB</h1>
        Hello, WEB!
    </header>
    `
}
function TOC(){
    const state = store.getState();
    let liTags = '';
    state.contents.map((item) => liTags +=  
        `<li>
            <a onclick="
                event.preventDefault();
                let action = {type: 'select', id:${item.id}}
                store.dispatch(action);
            "
                href="${item.id}">
                ${item.title}
            </a>
        </li>
        `
        )
    document.querySelector('#toc').innerHTML = `
    <nav>
        <ol>
           ${liTags}
        </ol>
    </nav>
    `;
}
function control(){
    document.querySelector('#control').innerHTML = `
    <ul>
        <li><a href="/create">create</a></li>
        <li><input type="button" value="delete"></li>
    </ul>
    `;
}
function article(){
    const state = store.getState();
    let aTitle, aDecs;
    state.contents.map((item) => {
        if(item.id === state.selected_id){
            aTitle = item.title
            aDecs = item.desc
        }
    })
    document.querySelector('#content').innerHTML = `
    <article>
        <h2>${aTitle}</h2>
        ${aDecs}
    </article>
    `
}

function reducer(state, action){
    if(state === undefined){
        return {
            selected_id: 1,
            contents:[
                {id:1, title:'HTML', desc:'HTML is ..'},
                {id:2, title:'CSS', desc:'CSS is ..'},
            ]
        }
    }
    if(action.type === 'select'){
        // newState = Object.assign({}, state, {selected_id:action.id});
        return {...state, selected_id:action.id}
    }
     console.log({...state, selected_id:action.id})
}
const store = Redux.createStore(reducer);
store.subscribe(article)
subject();
TOC();
control();
article();
        </script>

    </body>
</html>